# OCRé¡¹ç›®éƒ¨ç½²æŒ‡å—

## ðŸ”’ å®‰å…¨éƒ¨ç½²è¯´æ˜Ž

æœ¬é¡¹ç›®å·²ç»è¿‡å®‰å…¨ä¼˜åŒ–ï¼Œ**ä¸åŒ…å«ä»»ä½•ç¡¬ç¼–ç çš„æœåŠ¡å™¨IPåœ°å€**ã€‚æ‰€æœ‰è„šæœ¬éƒ½ä¼šè‡ªåŠ¨æ£€æµ‹æœåŠ¡å™¨çŽ¯å¢ƒï¼Œç¡®ä¿å¯ä»¥åœ¨ä»»ä½•æœåŠ¡å™¨ä¸Šå®‰å…¨éƒ¨ç½²ã€‚

## ðŸ“‹ éƒ¨ç½²é€‰é¡¹

### 1. å¿«é€Ÿéƒ¨ç½²ï¼ˆæŽ¨èï¼‰
```bash
# ä¸€é”®éƒ¨ç½²ï¼Œé€‚åˆæ–°æœåŠ¡å™¨
chmod +x quick_deploy.sh
./quick_deploy.sh
```

### 2. åˆ†æ­¥éƒ¨ç½²
```bash
# æ­¥éª¤1: éƒ¨ç½²åŽç«¯
cd src/BackendFastApi/ocrProjectBackend
chmod +x install_tesseract.sh
./install_tesseract.sh

# æ­¥éª¤2: æž„å»ºå‰ç«¯
cd ../../../
npm install
npm run build

# æ­¥éª¤3: é…ç½®Nginx
chmod +x setup_nginx.sh
./setup_nginx.sh

# æ­¥éª¤4: å¯åŠ¨æœåŠ¡
pm2 start ecosystem.config.js
```

### 3. å®Œæ•´éƒ¨ç½²
```bash
# åŒ…å«æ‰€æœ‰çŽ¯å¢ƒæ£€æŸ¥å’Œä¼˜åŒ–
chmod +x deploy_full_project.sh
./deploy_full_project.sh
```

## âš™ï¸ è‡ªå®šä¹‰é…ç½®

### é…ç½®æ–‡ä»¶ `config.env`
```bash
# æœåŠ¡å™¨IPåœ°å€ï¼ˆç•™ç©ºå°†è‡ªåŠ¨æ£€æµ‹ï¼‰
SERVER_IP=

# æœåŠ¡å™¨ç«¯å£é…ç½®
NGINX_PORT=80
BACKEND_PORT=8000

# é¡¹ç›®ç›®å½•
PROJECT_DIR=/home/admin/ocrProject

# éƒ¨ç½²é€‰é¡¹
AUTO_START_SERVICES=true
INSTALL_SYSTEM_DEPS=true
SETUP_FIREWALL=false
```

### çŽ¯å¢ƒå˜é‡è®¾ç½®
```bash
# æ–¹æ³•1: é€šè¿‡çŽ¯å¢ƒå˜é‡è®¾ç½®
export SERVER_IP=ä½ çš„æœåŠ¡å™¨IP
./quick_deploy.sh

# æ–¹æ³•2: ä¿®æ”¹config.envæ–‡ä»¶
echo "SERVER_IP=ä½ çš„æœåŠ¡å™¨IP" > config.env
./quick_deploy.sh
```

## ðŸ” IPåœ°å€æ£€æµ‹æœºåˆ¶

è„šæœ¬ä¼šæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§è‡ªåŠ¨æ£€æµ‹æœåŠ¡å™¨IPï¼š

1. **çŽ¯å¢ƒå˜é‡**: `$SERVER_IP`
2. **å¤–éƒ¨IP**: é€šè¿‡ `ifconfig.me` ç­‰æœåŠ¡èŽ·å–å…¬ç½‘IP
3. **æœ¬åœ°IP**: é€šè¿‡è·¯ç”±è¡¨èŽ·å–ä¸»è¦ç½‘ç»œæŽ¥å£IP
4. **é»˜è®¤å€¼**: `localhost`

## ðŸš€ å¿«é€Ÿå¼€å§‹

### åœ¨æ–°æœåŠ¡å™¨ä¸Šéƒ¨ç½²
```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/ocrProject.git
cd ocrProject

# 2. è¿è¡Œå¿«é€Ÿéƒ¨ç½²
chmod +x quick_deploy.sh
./quick_deploy.sh

# 3. è®¿é—®åº”ç”¨
# è„šæœ¬ä¼šè‡ªåŠ¨æ˜¾ç¤ºè®¿é—®åœ°å€
```

### åœ¨çŽ°æœ‰æœåŠ¡å™¨ä¸Šéƒ¨ç½²
```bash
# 1. è‡ªå®šä¹‰é…ç½®
cat > config.env << EOF
SERVER_IP=ä½ çš„æœåŠ¡å™¨IP
NGINX_PORT=80
BACKEND_PORT=8000
PROJECT_DIR=/home/admin/ocrProject
AUTO_START_SERVICES=true
INSTALL_SYSTEM_DEPS=false  # å¦‚æžœå·²å®‰è£…ç³»ç»Ÿä¾èµ–
EOF

# 2. éƒ¨ç½²
./quick_deploy.sh
```

## ðŸ”§ éƒ¨ç½²åŽç®¡ç†

### æœåŠ¡ç®¡ç†
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# é‡å¯åŽç«¯æœåŠ¡
pm2 restart ocr-backend

# æŸ¥çœ‹æ—¥å¿—
pm2 logs ocr-backend

# é‡å¯Nginx
sudo systemctl restart nginx
```

### æµ‹è¯•æœåŠ¡
```bash
# è‡ªåŠ¨èŽ·å–æœåŠ¡å™¨IPå¹¶æµ‹è¯•
SERVER_IP=$(curl -s ifconfig.me)
curl http://$SERVER_IP/
curl http://$SERVER_IP/api/
curl http://$SERVER_IP/docs
```

## ðŸŒ æ”¯æŒçš„éƒ¨ç½²çŽ¯å¢ƒ

- **æ“ä½œç³»ç»Ÿ**: Ubuntu 18.04+, Debian 10+
- **å†…å­˜è¦æ±‚**: 4GB+ï¼ˆä½¿ç”¨è½»é‡çº§Tesseract OCRï¼‰
- **ç½‘ç»œè¦æ±‚**: éœ€è¦è®¿é—®å¤–ç½‘ï¼ˆç”¨äºŽå®‰è£…ä¾èµ–ï¼‰
- **æƒé™è¦æ±‚**: æ™®é€šç”¨æˆ· + sudoæƒé™

## ðŸ”’ å®‰å…¨ç‰¹æ€§

### 1. æ— ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- âœ… æ‰€æœ‰IPåœ°å€åŠ¨æ€æ£€æµ‹
- âœ… ç«¯å£å¯é…ç½®
- âœ… è·¯å¾„å¯è‡ªå®šä¹‰

### 2. è‡ªåŠ¨çŽ¯å¢ƒæ£€æµ‹
- âœ… è‡ªåŠ¨æ£€æµ‹æœåŠ¡å™¨IP
- âœ… æ™ºèƒ½é€‰æ‹©æœ€ä½³IPåœ°å€
- âœ… é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§æ”¯æŒ

### 3. å®‰å…¨æœ€ä½³å®žè·µ
- âœ… ä¸ä½¿ç”¨rootç”¨æˆ·è¿è¡Œ
- âœ… é…ç½®æ–‡ä»¶åˆ†ç¦»
- âœ… ä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨æ¸…ç†
- âœ… æœåŠ¡éš”ç¦»è¿è¡Œ

## ðŸ“ æ–‡ä»¶ç»“æž„

```
ocrProject/
â”œâ”€â”€ quick_deploy.sh          # å¿«é€Ÿéƒ¨ç½²è„šæœ¬
â”œâ”€â”€ deploy_full_project.sh   # å®Œæ•´éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ deploy_frontend.sh       # å‰ç«¯éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ setup_nginx.sh          # Nginxé…ç½®è„šæœ¬
â”œâ”€â”€ nginx-ocr.conf          # Nginxé…ç½®æ¨¡æ¿
â”œâ”€â”€ config.env              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ DEPLOYMENT_GUIDE.md     # éƒ¨ç½²æŒ‡å—
â””â”€â”€ src/
    â”œâ”€â”€ BackendFastApi/
    â”‚   â””â”€â”€ ocrProjectBackend/
    â”‚       â”œâ”€â”€ install_tesseract.sh
    â”‚       â”œâ”€â”€ requirements.txt
    â”‚       â””â”€â”€ ...
    â””â”€â”€ ...
```

## ðŸ†˜ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Ÿ
A: ç›´æŽ¥è¿è¡Œ `./quick_deploy.sh`ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹äº‘æœåŠ¡å™¨çš„å…¬ç½‘IPã€‚

### Q: å¦‚ä½•éƒ¨ç½²åˆ°å†…ç½‘æœåŠ¡å™¨ï¼Ÿ
A: è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼š`export SERVER_IP=å†…ç½‘IP`ï¼Œç„¶åŽè¿è¡Œéƒ¨ç½²è„šæœ¬ã€‚

### Q: å¦‚ä½•æ›´æ”¹ç«¯å£ï¼Ÿ
A: ä¿®æ”¹ `config.env` æ–‡ä»¶ä¸­çš„ `NGINX_PORT` å’Œ `BACKEND_PORT`ã€‚

### Q: å¦‚ä½•åœ¨ä¸åŒç”¨æˆ·ä¸‹éƒ¨ç½²ï¼Ÿ
A: ä¿®æ”¹ `config.env` ä¸­çš„ `PROJECT_DIR` ä¸ºå¯¹åº”ç”¨æˆ·çš„ç›®å½•ã€‚

## ðŸ”„ æ›´æ–°éƒ¨ç½²

å¦‚æžœéœ€è¦æ›´æ–°å·²éƒ¨ç½²çš„é¡¹ç›®ï¼š

```bash
# 1. åœæ­¢æœåŠ¡
pm2 stop ocr-backend

# 2. æ›´æ–°ä»£ç 
git pull

# 3. é‡æ–°éƒ¨ç½²
./quick_deploy.sh

# 4. é‡å¯æœåŠ¡
pm2 start ocr-backend
```

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

å¦‚æžœé‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. **ç½‘ç»œè¿žæŽ¥**: ç¡®ä¿æœåŠ¡å™¨å¯ä»¥è®¿é—®å¤–ç½‘
2. **æƒé™é—®é¢˜**: ç¡®ä¿ç”¨æˆ·æœ‰sudoæƒé™
3. **ç«¯å£å†²çª**: æ£€æŸ¥80å’Œ8000ç«¯å£æ˜¯å¦è¢«å ç”¨
4. **å†…å­˜ä¸è¶³**: ç¡®ä¿æœåŠ¡å™¨æœ‰è¶³å¤Ÿå†…å­˜ï¼ˆ4GB+ï¼‰

## ðŸŽ¯ éƒ¨ç½²å®ŒæˆåŽ

éƒ¨ç½²æˆåŠŸåŽï¼Œæ‚¨å¯ä»¥ï¼š

1. **è®¿é—®åº”ç”¨**: http://æ‚¨çš„æœåŠ¡å™¨IP
2. **æŸ¥çœ‹APIæ–‡æ¡£**: http://æ‚¨çš„æœåŠ¡å™¨IP/docs
3. **å¥åº·æ£€æŸ¥**: http://æ‚¨çš„æœåŠ¡å™¨IP/health
4. **ç®¡ç†æœåŠ¡**: ä½¿ç”¨PM2å‘½ä»¤ç®¡ç†åŽç«¯æœåŠ¡

---

**ï¿½ï¿½ æ­å–œï¼æ‚¨çš„OCRé¡¹ç›®å·²æˆåŠŸéƒ¨ç½²ï¼** 